<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <button>Button1</button>
    <br>
    <button>Button2</button>
    <br>
    <button>Button3</button>
    <br>

    <script>
        // js object to JSON
        let personObj = {name: 'Kobe'};
        let person = JSON.stringify(personObj);
        console.log(typeof person);

        // JSON to js object
        let obj = JSON.parse(person);
        console.log(typeof obj);

        // Object.create(prototype, [descriptors])
        let person1 = {username: 'Bob', age: 20};
        let person2 = Object.create(person1, {
            sex: {
                value: 'M',
                writable: true,
                enumerable: true
            },
            title: {
                value: 'chef',
                writable: true,
                configurable: false
            }
        });
        console.log('person1', person1);
        console.log('person2', person2);
        person2.sex = 'F';
        delete person2.sex; // not allowed
        console.log('person2 updated', person2);

        // Enum properties
        for (let i in person2) {
            console.log(i);
            // title is not available due to enumerable = false
        }

        // Object
        let person3 = {firstName: 'Conan', lastName: 'Bryan'};
        let person4 = Object.defineProperties(person3, {
            fullName: {
                get: function () {
                    return `${this.firstName} ${this.lastName}`;
                },
                set: function (data) {
                    let name = data.split(' ');
                    this.firstName = name[0];
                    this.lastName = name[1];
                }
            }
        });
        let person5 = {
            firstName: 'Conan',
            lastName: 'Bryan',
            get fullName() {
                return `${this.firstName} ${this.lastName}`;
            },
            set fullName(data) {
                let name = data.split(' ');
                this.firstName = name[0];
                this.lastName = name[1];
            }
        };

        console.log(person4.fullName);
        person4.fullName = "Conan O'Bryan";
        console.log(person4.fullName);

        console.log(person5.fullName);
        person5.fullName = "Conan O'Bryan";
        console.log(person5.fullName);

        // Array
        let arr = ['A', 'B', 'C', 'D', 'A', 'B', 'C', 'D'];
        console.log('indexOf', arr.indexOf('A'));
        console.log('lastIndexOf', arr.lastIndexOf('A'));
        arr.forEach(function (value, index) {
            console.log(`arr[${index}] = ${value}`);
        });
        let newArr = arr.map(function (value, index) {
            return value.toLowerCase();
        });
        console.log(newArr);
        let arr2 = arr.filter(function (value, index) {
            if (value === 'A' || value === 'C') {
                return value;
            }
        });
        console.log(arr2);

        // bind(), call() and apply()
        let myCar = {
            typeOfCar: 'Sedan',
            colour: 'Black',
            spec: function () {
                console.log(this);
                // console.log(`typeOfCar: ${this.typeOfCar}, colour: ${this.colour}`);
            },
            update: function (typeOfCar, colour) {
                this.typeOfCar = typeOfCar;
                this.colour = colour;
                console.log(this);
                // console.log(`typeOfCar: ${this.typeOfCar}, colour: ${this.colour}`);
            }
        };
        let myCoupe = {typeOfCar: 'Sedan', colour: 'Black'};

        myCar.spec();
        myCar.spec.call(myCoupe);
        myCar.spec.apply(myCoupe);

        myCar.update('Coupe', 'Blue');
        myCar.update.call(myCoupe, 'Coupe', 'Blue');
        myCar.update.apply(myCoupe, ['Coupe', 'Blue']);


        let module = {
            x: 81,
            getX: function () {
                console.log('this', this);
                return this.x;
            }
        };

        console.log(module.getX()); // 81

        let retrieveX = module.getX;
        console.log(retrieveX()); // undefined

        let boundGetX = retrieveX.bind(module);
        console.log(boundGetX()); // 81


        function LateBloomer() {
            this.petalCount = 2;
        }

        LateBloomer.prototype.bloom = function () {
            // wait for 5 seconds
            window.setTimeout(this.declare.bind(this), 5000);
        };

        LateBloomer.prototype.declare = function () {
            console.log('I am a beautiful flower with ' + this.petalCount + ' petals!');
        };

        let flower = new LateBloomer();
        flower.bloom();
    </script>
</head>
<body>

</body>
</html>
